<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <style>
    :root { --card-w: 40vw; --card-h: 100vh; }
    * { box-sizing: border-box; }
    html, body { margin:0; height:100%; background:transparent; overflow:hidden; }
    .wrap {
      height:100%;
      display:flex; align-items:center;
      overflow-x:auto; overflow-y:hidden;
      padding:0; margin:0;
      -webkit-overflow-scrolling:touch;
      scrollbar-width:none;
    }
    .wrap::-webkit-scrollbar { display:none; }
    .card {
      position:relative; flex:0 0 var(--card-w); height:var(--card-h);
      background:transparent;
      overflow:hidden;
      display:block; text-decoration:none; cursor:pointer;
    }
    model-viewer {
      width:100%; height:100%;
      background:transparent;
      --poster-color: transparent;
    }

    /* Scroll bar + orb */
    .scrollbar {
      position:fixed; bottom:24px; left:50%; transform:translateX(-50%);
      width:60%; height:5px;
      background:rgba(255,255,255,0.12);
      border-radius:8px;
      backdrop-filter:blur(10px);
      -webkit-backdrop-filter:blur(10px);
      box-shadow:0 2px 6px rgba(0,0,0,0.3);
    }
    .thumb {
      position:absolute; top:50%;
      width:28px; height:28px; border-radius:50%;
      background:rgba(255,255,255,0.25);
      backdrop-filter:blur(20px); -webkit-backdrop-filter:blur(20px);
      box-shadow: inset 0 2px 6px rgba(255,255,255,0.6),
                  inset 0 -2px 6px rgba(0,0,0,0.25),
                  0 6px 12px rgba(0,0,0,0.5);
      transform:translate(-50%,-50%); cursor:pointer;
    }
  </style>
</head>
<body>
  <div class="wrap" id="scrollWrap">

    <!-- 1 -->
    <a class="card" href="https://studio.858.ie" target="_top">
      <model-viewer
        src="2_tshirt_B.glb"
        alt="T-shirt 1"
        disable-zoom
        camera-orbit="0deg 90deg auto"
        loading="eager" reveal="auto"
        crossorigin="anonymous"
        exposure="1.2" shadow-intensity="1" shadow-softness="0.8"
        environment-image="neutral"
        data-yaw-offset="0">
      </model-viewer>
    </a>

    <!-- 2 -->
    <a class="card" href="https://studio.858.ie" target="_top">
      <model-viewer
        src="3_T_Tate.glb"
        alt="1_tshirt_OT"
        disable-zoom
        camera-orbit="0deg 90deg auto"
        autoplay animation-loop
        loading="lazy" reveal="auto"
        crossorigin="anonymous"
        exposure="1.2" shadow-intensity="1" shadow-softness="0.8"
        environment-image="neutral"
        data-yaw-offset="0">
      </model-viewer>
    </a>

    <!-- 3 -->
    <a class="card" href="https://studio.858.ie" target="_top">
      <model-viewer
        src="1_tshirt_OT.glb"
        alt="1_tshirt_OT duplicate"
        disable-zoom
        camera-orbit="0deg 90deg auto"
        autoplay animation-loop
        loading="lazy" reveal="auto"
        crossorigin="anonymous"
        exposure="1.2" shadow-intensity="1" shadow-softness="0.8"
        environment-image="neutral"
        data-yaw-offset="0">
      </model-viewer>
    </a>

    <!-- 4 -->
    <a class="card" href="https://studio.858.ie" target="_top">
      <model-viewer
        src="myModel.gltf"
        alt="T-shirt 1 duplicate"
        disable-zoom
        camera-orbit="0deg 90deg auto"
        loading="lazy" reveal="auto"
        crossorigin="anonymous"
        exposure="1.2" shadow-intensity="1" shadow-softness="0.8"
        environment-image="neutral"
        data-yaw-offset="0">
      </model-viewer>
    </a>

    <!-- 5 -->
    <a class="card" href="https://studio.858.ie" target="_top">
      <model-viewer
        src="L8_T3/L8_T3.gltf"
        alt="L8_T3 duplicate"
        disable-zoom
        camera-orbit="0deg 90deg auto"
        autoplay animation-loop
        loading="lazy" reveal="auto"
        crossorigin="anonymous"
        exposure="1.2" shadow-intensity="1" shadow-softness="0.8"
        environment-image="neutral"
        data-yaw-offset="0">
      </model-viewer>
    </a>

  </div>

  <!-- Scrollbar -->
  <div class="scrollbar">
    <div class="thumb" id="thumb"></div>
  </div>

  <script>
    // --- helpers ---
    const clamp = (v, min, max) => Math.max(min, Math.min(max, v));

    // --- scroll / orb ---
    const wrap = document.getElementById('scrollWrap');
    const thumb = document.getElementById('thumb');
    const scrollbar = document.querySelector('.scrollbar');

    function updateThumb() {
      const maxScroll = Math.max(1, wrap.scrollWidth - wrap.clientWidth);
      const ratio = wrap.scrollLeft / maxScroll;
      thumb.style.left = (ratio * scrollbar.clientWidth) + 'px';
    }
    wrap.addEventListener('scroll', updateThumb, { passive:true });
    window.addEventListener('resize', updateThumb);
    updateThumb();

    // drag orb to scroll
    let dragging = false;
    thumb.addEventListener('mousedown', e => { dragging = true; e.preventDefault(); });
    window.addEventListener('mouseup', () => dragging = false);
    window.addEventListener('mousemove', e => {
      if (!dragging) return;
      const r = scrollbar.getBoundingClientRect();
      const x = clamp(e.clientX - r.left, 0, r.width);
      thumb.style.left = x + 'px';
      wrap.scrollLeft = (x / r.width) * (wrap.scrollWidth - wrap.clientWidth);
    });

    // wheel/trackpad → horizontal
    wrap.addEventListener('wheel', e => {
      wrap.scrollLeft += (Math.abs(e.deltaX) > Math.abs(e.deltaY)) ? e.deltaX : e.deltaY;
    }, { passive:true });

    // --- mouse-controlled camera (biased to FRONT) ---
    const models = Array.from(document.querySelectorAll('model-viewer'));

    // Limits around the front:
    const basePhi = 90;         // 90° = front
    const phiRange = 15;        // allow 90° ± 15°
    const yawRange = 45;        // allow ±45° left/right

    window.addEventListener('mousemove', (e) => {
      const xRatio = e.clientX / window.innerWidth;   // 0..1
      const yRatio = e.clientY / window.innerHeight;  // 0..1

      const yaw = clamp((xRatio - 0.5) * 2 * yawRange, -yawRange, yawRange);   // -45..45
      const phi = clamp(basePhi + (0.5 - yRatio) * 2 * phiRange, basePhi - phiRange, basePhi + phiRange); // ~75..105

      models.forEach(mv => {
        // Optional per-model facing correction (degrees). Put data-yaw-offset="180" on a model to flip it.
        const offset = parseFloat(mv.dataset.yawOffset || '0') || 0;
        mv.cameraOrbit = `${(yaw + offset)}deg ${phi}deg auto`;
      });
    });

    // clicking a model follows its link
    models.forEach(mv => {
      mv.addEventListener('click', () => {
        const a = mv.closest('a');
        if (a) window.open(a.href, a.target || '_self');
      });
    });
  </script>
</body>
</html>
